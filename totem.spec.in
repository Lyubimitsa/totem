# $Id$

Summary: Movie player for GNOME 2 based on the xine engine.
Name: totem
Version: @VERSION@
Release: 1
License: GPL
Group: Applications/Multimedia
Source: http://www.hadess.net/files/software/%{name}/%{name}-%{version}.tar.gz
URL: http://www.hadess.net/totem.php3
BuildRoot: %{_tmppath}/%{name}-root
Requires: xine-libs, gnome-desktop >= 2.0.0
BuildRequires: xine-libs-devel, pkgconfig
BuildRequires: libgnomeui-devel >= 2.0.0, gnome-vfs2-devel, libglade2-devel

%description
Totem is simple movie player for the Gnome desktop based on xine. It features a
simple playlist, a full-screen mode, seek and volume controls, as well as
a pretty complete keyboard navigation.

%prep
%setup -q

%build
%configure
export GCONF_DISABLE_MAKEFILE_SCHEMA_INSTALL=1
make %{?_smp_mflags}

%install
rm -rf %{buildroot}
%makeinstall
%find_lang %{name}

%clean
rm -rf %{buildroot}

%post
export GCONF_CONFIG_SOURCE=`gconftool-2 --get-default-source`
gconftool-2 --makefile-install-rule %{_sysconfdir}/gconf/schemas/totem.schemas > /dev/null

%files -f %{name}.lang
%defattr(-, root, root)
%doc AUTHORS COPYING ChangeLog NEWS README TODO
%config %{_sysconfdir}/gconf/schemas/%{name}.schemas
%{_bindir}/%{name}
%{_datadir}/application-registry/%{name}.applications
%{_datadir}/applications/%{name}.desktop
%{_datadir}/mime-info/%{name}.keys
%{_datadir}/pixmaps/*
%{_datadir}/%{name}

%changelog
* Mon Sep 30 2002 Bastien Nocera <hadess@hadess.net>
- Install gconf schemas properly

* Mon Sep 30 2002 Matthias Saou <matthias.saou@est.une.marmotte.net>
- Initial RPM release.

